<div class="task-completion-container">
  <div class="chart-header">
    <h3>{{ "dashboard.PRODUCTIVITY_TITLE" | translate }}</h3>
    <div class="filters">
      <label for="timeFilter">{{ "dashboard.RANGE" | translate }}:</label>
      <select
        id="timeFilter"
        class="time-selector"
        (change)="onPeriodChange($any($event).target)"
      >
        @for (period of timePeriods; track period) {
        <option [value]="period.value">
          {{ period.label | translate }}
        </option>
        }
      </select>

      <label for="userFilter">{{ "dashboard.USERS" | translate }}:</label>
      <select
        id="userFilter"
        class="user-selector"
        (change)="
          onUserChange(
            $any($event).target.value ? +$any($event).target.value : undefined
          )
        "
      >
        <option value="">{{ "dashboard.ALL_USERS" | translate }}</option>
        @for (user of users; track user) {
        <option [value]="user.id">
          {{ user.userName }}
        </option>
        }
      </select>

      <!-- Chart Type Filter -->
      <label for="chartTypeFilter"
        >{{ "dashboard.CHART_TYPE" | translate }}:</label
      >
      <select
        id="chartTypeFilter"
        class="chart-type-selector user-selector"
        [(ngModel)]="selectedChartType"
        (change)="onChartTypeChange()"
      >
        <option value="bar">{{ "dashboard.BAR_CHART" | translate }}</option>
        <option value="line">{{ "dashboard.LINE_CHART" | translate }}</option>
        <option value="radar">{{ "dashboard.RADAR_CHART" | translate }}</option>
      </select>
    </div>
  </div>
  <div class="chart-container">
    <canvas
      baseChart
      [data]="barChartData"
      [options]="barChartOptions"
      [type]="barChartType"
      style="min-height: 300px"
    ></canvas>
  </div>
</div>
